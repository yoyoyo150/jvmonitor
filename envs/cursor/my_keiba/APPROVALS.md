# 承認範囲定義

## 自動許可（確認不要）

### 読み取り系操作
- `Get-ChildItem` - ファイル・ディレクトリ一覧取得
- `Get-Content` - ファイル内容読み取り
- `Select-String` - テキスト検索
- `Get-Location` - 現在のディレクトリ取得
- `Get-Date` - 日時取得
- `Get-Process` - プロセス一覧取得
- `Get-Service` - サービス一覧取得

### 情報収集・分析系
- ファイル存在確認
- ディレクトリ構造確認
- 設定ファイル読み取り
- ログファイル確認
- データベース接続確認（読み取りのみ）
- システム情報取得

### 検索・調査系
- コードベース検索
- 設定値確認
- 依存関係確認
- バージョン情報確認

## 常に確認が必要（承認必須）

### ファイル操作
- ファイル作成・削除・移動・コピー
- ディレクトリ作成・削除
- ファイル内容変更
- バックアップ作成

### 実行系
- `git` コマンド（clone, pull, push, commit, merge など）
- `dotnet` コマンド（build, run, publish など）
- `npm` / `pip` コマンド（install, update など）
- スクリプト実行
- アプリケーション起動・停止

### システム設定
- 環境変数設定
- パス設定
- サービス設定
- レジストリ変更（Windows）

### データベース操作
- データベース作成・削除
- テーブル作成・削除・変更
- データ挿入・更新・削除
- スキーマ変更

### ネットワーク操作
- ポート開放・閉鎖
- ファイアウォール設定
- プロキシ設定

### インストール・アンインストール
- パッケージインストール
- アプリケーションインストール
- 依存関係の追加・削除

## セッション限定承認

### 「Always」承認の範囲
以下の操作で「Always」承認が与えられた場合、**そのセッション内のみ**有効：

- 特定のファイルの繰り返し変更
- 特定のコマンドの繰り返し実行
- 特定のディレクトリでの作業

### セッション終了時のリセット
- 新しいセッション開始時は「Always」承認をリセット
- 再度確認を求める
- 前回の承認は引き継がない

## 緊急時例外

### エラー復旧
- システムエラー発生時は最小限の復旧操作を自動実行可能
- ただし、復旧後は必ず報告と確認を求める

### データ保護
- データ損失を防ぐための緊急操作は自動実行可能
- バックアップ作成など

## 承認プロセス

### 1. 計画提示
```
## 実行計画
操作: [具体的な操作内容]
対象: [対象ファイル・システム]
影響: [予想される影響]
リスク: [潜在的なリスク]
```

### 2. 確認要求
```
実行しますか？ [y/N]
```

### 3. 承認後の実行
- 承認後にのみ実行
- 進捗報告
- 結果要約

### 4. エラー時の対応
- 即座に停止
- エラー詳細報告
- 復旧手順提案

## 特殊ケース

### バッチ処理
- 複数ファイルの一括処理は個別に確認
- または全体の影響範囲を明示して一括確認

### 依存関係のある操作
- 前提条件を明示
- 依存関係の確認
- 順序立てた実行計画

### ロールバック可能な操作
- ロールバック手順を事前に提示
- バックアップ作成を推奨

## 監査ログ

### 記録項目
- 実行日時
- 操作内容
- 承認者（ユーザー）
- 実行結果
- エラー内容（発生時）

### ログ形式
```
[YYYY-MM-DD HH:MM:SS] [OPERATION] [STATUS] [DETAILS]
```

---

**注意**: この承認範囲は安全性を最優先に設計されています。不明な場合は常に確認を求めてください。